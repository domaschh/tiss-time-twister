<div
  *ngIf="error"
  class="alert alert-warning alert-dismissible fade show"
  role="alert"
>
  <strong>Authentication problems!</strong> {{ errorMessage }}
  <button
    type="button"
    (click)="vanishError()"
    class="close"
    data-dismiss="alert"
    aria-label="Close"
  >
    <span aria-hidden="true">&times;</span>
  </button>
</div>

<div class="pt-5">
  <div class="row">
    <div class="col-md-6 mx-auto">
      <span class="anchor" id="formLogin"></span>

      <div class="card rounded-0">
        <div class="card-header">
          <h3 class="mb-0">
            {{ editMode ? "Edit a Calendar" : "Import a Calendar" }}
          </h3>
        </div>

        <div class="card-body">
          <form
            class="form space-y-5"
            [formGroup]="importForm"
            (ngSubmit)="importCalendar()"
          >
            <div class="form-group">
              <label for="inputName">Calendar Name</label>
              <input
                type="text"
                name="name"
                formControlName="name"
                class="form-control"
                id="inputName"
                aria-describedby="usernameHelp"
                placeholder="enter a calendar name"
              />
              <div
                *ngIf="submitted && importForm.controls.name.errors"
                class="error"
              >
                <small
                  class="form-text text-warning"
                  *ngIf="importForm.controls.name.errors.required"
                >
                  A Name is required!
                </small>
              </div>
            </div>

            <div class="form-group">
              <label>Import Source</label>
              <select
                class="form-control"
                formControlName="importSource"
                (change)="onImportSourceChange()"
              >
                <option value="url">URL</option>
                <option value="file">File</option>
              </select>
            </div>

            <div *ngIf="isURLImport" class="form-group">
              <div class="form-group">
                <label for="inputLink">Calendar Import URL</label>
                <input
                  type="url"
                  name="link"
                  formControlName="link"
                  class="form-control"
                  id="inputLink"
                  placeholder="Calendar URL"
                />
                <div
                  *ngIf="submitted && importForm.controls.link.errors"
                  class="error"
                >
                  <small
                    class="form-text text-warning"
                    *ngIf="importForm.controls.link.errors.required"
                  >
                    A link is required!
                  </small>
                </div>
              </div>
            </div>

            <div *ngIf="!isURLImport" class="form-group">
              <label for="inputFile">Calendar File</label>
              <input
                type="file"
                name="file"
                class="form-control"
                id="inputFile"
                (change)="onFileSelected($event)"
              />
            </div>

            <button
              type="button"
              (click)="importCalendar()"
              [disabled]="
                !importForm.valid ||
                (isURLImport && !importForm.controls.link.value) ||
                (!isURLImport && !selectedFile)
              "
              class="btn btn-success float-right"
            >
              {{ editMode ? "Edit" : "Import" }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
